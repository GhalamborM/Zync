# دست از مدیریت دستی اسکریپت‌های SQL بردارید: معرفی Zync، مدیر بسته پایگاه داده

اگر تا به حال روی یک پروژه بزرگ پایگاه داده کار کرده باشید، با این دردسر آشنا هستید. پوشه‌هایی پر از اسکریپت‌های SQL برای رویه‌ها (stored procedures)، توابع و نماها (views) دارید. اسکریپت `A` به `B` وابسته است و `B` به `C`. استقرار در یک محیط جدید به معنای اجرای آن‌ها به ترتیب صحیح است و وای به روزی که یکی را از قلم بیندازید. اشتراک‌گذاری ابزارهای قابل استفاده مجدد بین پروژه‌ها یک کابوس کپی-پیست است.

ما مدیران بسته قدرتمندی برای کدهای برنامه‌های خود ساخته‌ایم—npm برای Node.js، NuGet برای .NET، Pip برای پایتون. آن‌ها وابستگی‌ها، نسخه‌بندی و توزیع را بی‌نقص مدیریت می‌کنند. پس چرا ما هنوز اسکریپت‌های پایگاه داده را طوری مدیریت می‌کنیم که انگار در سال ۱۹۹۹ هستیم؟

وقت تغییر فرا رسیده است. معرفی **Zync**، یک مدیر بسته ساده اما قدرتمند برای SQL Server که برای آوردن راحتی مدیریت بسته‌های مدرن مستقیماً به پایگاه داده شما طراحی شده است.

### هرج و مرج مدیریت دستی اسکریپت

قبل از اینکه به راه‌حل بپردازیم، بیایید مشکل را درک کنیم. به طور سنتی، مدیریت مجموعه‌ای از اشیاء پایگاه داده شامل موارد زیر است:

*   **ردیابی دستی وابستگی‌ها:** شما باید به خاطر داشته باشید که `CreateUserView.sql` باید بعد از `CreateUserTable.sql` اجرا شود. این دانش اغلب در ذهن یک توسعه‌دهنده یا یک فایل `README` شکننده ذخیره می‌شود.
*   **اسکریپت‌های پراکنده:** توابع و رویه‌های کاربردی اغلب در پوشه‌های مختلف پروژه پراکنده هستند که منجر به تکرار کد و سردردهای نگهداری می‌شود.
*   **استقرار ناسازگار:** استقرار در یک پایگاه داده جدید اغلب یک فرآیند دستی و مستعد خطا است که به راحتی می‌تواند منجر به ناهماهنگی بین محیط‌های توسعه، تست و تولید شود.
*   **همکاری دشوار:** به اشتراک گذاشتن مجموعه‌ای از ابزارهای مفید پایگاه داده با تیم یا جامعه به هیچ وجه ساده نیست.

Zync از دل این ناامیدی متولد شد. این پروژه با اشیاء پایگاه داده شما مانند **بسته‌ها** رفتار می‌کند—واحدهای کد ماژولار، قابل استفاده مجدد و آگاه از وابستگی.

### چگونه Zync گردش کار شما را ساده می‌کند

Zync بر پایه یک رویه ذخیره شده واحد، `dbo.Zync`، ساخته شده است که به عنوان رابط خط فرمان شما در داخل SQL Server Management Studio (SSMS) عمل می‌کند. پس از نصب، از طریق دستورات ساده به دنیایی از قابلیت‌ها دسترسی پیدا می‌کنید.

فلسفه اصلی ساده است: بسته‌های SQL خود را در یک مخزن گیت‌هاب میزبانی کنید و اجازه دهید Zync بقیه کارها را انجام دهد.

#### مفاهیم کلیدی:

*   **📦 مدیریت بسته:** اشیاء SQL مرتبط (رویه‌ها، توابع و غیره) را در یک "بسته" گروه‌بندی کنید، که به سادگی یک پوشه در یک مخزن است.
*   **🔄 حل خودکار وابستگی‌ها:** وابستگی‌ها را برای یک بسته تعریف کنید و Zync به طور خودکار ابتدا آن‌ها را دریافت و نصب می‌کند.
*   **🎯 دستورات ساده:** یک ساختار دستوری تمیز و شهودی برای لیست کردن و نصب بسته‌ها.
*   **🏗️ مخازن استاندارد:** از مخزن رسمی Zync استفاده کنید یا آن را برای بسته‌های خصوصی به مخزن خودتان متصل کنید.

### شروع کار با Zync

آماده‌اید امتحان کنید؟ فقط چند دقیقه طول می‌کشد تا راه‌اندازی شود.

#### مرحله ۱: نصب رویه ذخیره شده Zync

ابتدا، باید رویه اصلی `Zync` را در پایگاه داده هدف خود نصب کنید. فقط اسکریپت [`Zync.sql`](https://github.com/mirshahreza/Zync/blob/main/MsSql/Zync.sql) را از مخزن رسمی دانلود و اجرا کنید. این راه‌اندازی یک‌باره تمام چیزی است که نیاز دارید.

#### مرحله ۲: لیست کردن بسته‌های موجود

پس از نصب، می‌توانید با دستور `ls` (list) ببینید کدام بسته‌ها در مخزن پیش‌فرض موجود هستند.

```sql
EXEC [dbo].[Zync] 'ls'
```

این دستور از API گیت‌هاب استعلام می‌گیرد و لیستی از بسته‌های (پوشه‌های) موجود را که می‌توانید نصب کنید، برمی‌گرداند.

**خروجی مورد انتظار:**

```
Fetching available packages from repository...
Available packages:
-------------------
AppEnd
DbUtils
Number
String
-------------------
```

#### مرحله ۳: نصب اولین بسته شما

فرض کنید به مجموعه‌ای از ابزارهای دستکاری رشته نیاز دارید. می‌توانید بسته `String` را با دستور `i` (install) نصب کنید.

```sql
EXEC [dbo].[Zync] 'i String'
```

این چیزی است که در پشت صحنه اتفاق می‌افتد:
۱. Zync URL فایل اصلی SQL بسته را در مخزن می‌سازد.
۲. محتوای اسکریپت را دریافت می‌کند.
۳. هرگونه وابستگی لیست شده در بالای فایل را بررسی کرده و ابتدا آن‌ها را نصب می‌کند.
۴. در نهایت، اسکریپت را اجرا می‌کند و تمام اشیاء بسته `String` را در پایگاه داده شما ایجاد می‌کند.

**خروجی:**

```
Installing package: 'String'...
 -> Fetched 'String' successfully.
 -> Package 'String' installed successfully.
```

به همین سادگی، اکنون به توابع مفیدی مانند `ZzSplitString` و `ZzCountWord` دسترسی دارید بدون اینکه هرگز ویرایشگر کوئری خود را ترک کنید.

همچنین می‌توانید یک اسکریپت واحد از یک بسته را نصب کنید اگر به کل مجموعه نیاز ندارید:

```sql
-- فقط تابع ZzSplitString را نصب می‌کند
EXEC [dbo].[Zync] 'i String/ZzSplitString.sql'
```

### نگاهی به اکوسیستم Zync

مخزن پیش‌فرض در حال حاضر شامل چندین بسته مفید برای شروع کار شما است:

*   **DbUtils:** مجموعه‌ای قدرتمند از ابزارها برای مدیریت پایگاه داده، شامل رویه‌هایی برای ایجاد/حذف جداول، مدیریت ستون‌ها و تحلیل وابستگی‌های اشیاء.
*   **String:** مجموعه‌ای از توابع برای عملیات رایج رشته مانند تقسیم کردن، پاک‌سازی فاصله‌ها و شمارش.
*   **Number:** توابع کمکی برای قالب‌بندی اعداد و تبدیل اندازه‌های بایت (مثلاً به KB، MB، GB).
*   **AppEnd:** مجموعه‌ای از بلوک‌های ساختمانی برای برنامه‌ها، از جمله مدیریت کاربران و نقش‌ها.

### آینده روشن است

Zync تازه شروع به کار کرده است. چشم‌انداز این است که یک اکوسیستم غنی از اجزای پایگاه داده قابل استفاده مجدد ایجاد شود. نقشه راه شامل موارد زیر است:

*   **پشتیبانی از پایگاه‌های داده دیگر** مانند PostgreSQL، MySQL و Oracle.
*   **نسخه‌بندی بسته‌ها** برای مدیریت نسخه‌های مختلف یک بسته.
*   **یک دستور `uninstall`** برای حذف ایمن بسته‌ها.

### به این جنبش بپیوندید

مدیریت کد پایگاه داده نباید یک کار طاقت‌فرسا باشد. Zync یک رویکرد مدرن و ساده ارائه می‌دهد که در زمان صرفه‌جویی کرده و خطاها را کاهش می‌دهد. این پروژه به توسعه‌دهندگان قدرت می‌دهد تا ابزارهای پایگاه داده را به راحتی بسازند، به اشتراک بگذارند و دوباره استفاده کنند.

پروژه را در گیت‌هاب بررسی کنید، به آن ستاره بدهید و آن را در پروژه‌های خود امتحان کنید. مشارکت‌ها، بازخوردها و ایده‌ها همیشه مورد استقبال قرار می‌گیرند.

**پروژه را اینجا پیدا کنید: [https://github.com/mirshahreza/Zync](https://github.com/mirshahreza/Zync)**

---

**محسن میرشاهرضا**
